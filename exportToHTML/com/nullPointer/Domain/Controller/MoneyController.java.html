<html>
<head>
<title>MoneyController.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #000080; font-weight: bold;}
.s1 { color: #000000;}
.s2 { color: #808080; font-style: italic;}
.s3 { color: #808080; font-weight: bold; font-style: italic;}
.s4 { color: #0000ff;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
MoneyController.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span>com.nullPointer.Domain.Controller;

<span class="s0">import </span>com.nullPointer.Domain.Model.Player;

<span class="s2">/**</span>
 * <span class="s3">@overview    </span><span class="s2">This class performs the operations that are needed to be done in order to complete money</span>
 * 				transfers between the players and the game itself and/or other players.
 *
 */
<span class="s0">public class </span>MoneyController {
	<span class="s0">private static </span>MoneyController _instance;
	<span class="s0">private </span>PlayerController playerController = PlayerController.getInstance();
	<span class="s0">private int </span>poolMoney = <span class="s4">0</span>;

	<span class="s0">private </span>MoneyController(){

	}

	<span class="s0">public static </span>MoneyController getInstance() {
		<span class="s0">if</span>(_instance == <span class="s0">null</span>) {
			_instance = <span class="s0">new </span>MoneyController();
		}
		<span class="s0">return </span>_instance;
	}

	 <span class="s2">/**</span>
	  * 
	  * <span class="s3">@param </span><span class="s2">player : current player</span>
	  * <span class="s3">@param </span><span class="s2">amount : how much will the player's money be increased</span>
	  * <span class="s3">@requires </span><span class="s2">player != null &amp; amount &gt;= 0</span>
	  * <span class="s3">@modifies </span><span class="s2">player's money</span>
	  * <span class="s3">@effects </span><span class="s2">increases the player's money by amount</span>
	  */
	<span class="s0">public void </span>increaseMoney(Player player, <span class="s0">int </span>amount) {
		player.setMoney(player.getMoney()+amount);
	}

	<span class="s2">/**</span>
	  * 
	  * <span class="s3">@param </span><span class="s2">player : current player</span>
	  * <span class="s3">@param </span><span class="s2">amount : how much will the player's money be decreased</span>
	  * <span class="s3">@requires </span><span class="s2">player != null &amp; amount &gt;= 0</span>
	  * <span class="s3">@modifies </span><span class="s2">player's money</span>
	  * <span class="s3">@effects </span><span class="s2">decreases the player's money by amount</span>
	  */
	<span class="s0">public void </span>decreaseMoney(Player player, <span class="s0">int </span>amount) {
		player.setMoney(player.getMoney()-amount);
	}

	<span class="s2">/**</span>
	  * 
	  * <span class="s3">@param </span><span class="s2">payer : current player</span>
	  * <span class="s3">@param </span><span class="s2">receiver : Player who receives the money.</span>
	  * <span class="s3">@param </span><span class="s2">amount : how much will the taken from payer and given to receiver</span>
	  * <span class="s3">@requires </span><span class="s2">player != null &amp; amount &gt;= 0</span>
	  * <span class="s3">@modifies </span><span class="s2">payer's and receiver's money</span>
	  * <span class="s3">@effects </span><span class="s2">transfers a certain amount of money (&quot;amount&quot;) from the payer player to receiver player</span>
	  */
	<span class="s0">public void </span>transferMoney(Player payer, Player receiver, <span class="s0">int </span>amount) {
		decreaseMoney(payer, amount);
		increaseMoney(receiver, amount);
	}

	<span class="s2">/**</span>
	  * 
	  * <span class="s3">@param </span><span class="s2">player : current player</span>
	  * <span class="s3">@param </span><span class="s2">amount : how much will be collected from all players except &quot;player&quot; </span>
	  * <span class="s3">@requires </span><span class="s2">player != null &amp; amount &gt;= 0</span>
	  * <span class="s3">@modifies </span><span class="s2">all players' money</span>
	  * <span class="s3">@effects </span><span class="s2">collects money from all players (except &quot;player&quot;) and the collected sum is given to &quot;player&quot;</span>
	  */
	<span class="s0">public void </span>getMoneyFromAllPlayers(Player player, <span class="s0">int </span>amount) {
		<span class="s0">int </span>gain = <span class="s4">0</span>;
		<span class="s0">for</span>(Player p:playerController.getPlayers()) {
			<span class="s0">if</span>(!p.equals(player)) {
				decreaseMoney(p, amount);
				gain += amount;
			}
		}
		increaseMoney(player, gain);
	}

	<span class="s0">public int </span>getPoolMoney() {
		<span class="s0">return </span>poolMoney;
	}

	<span class="s0">public void </span>setPoolMoney(<span class="s0">int </span>poolMoney) {
		<span class="s0">this</span>.poolMoney = poolMoney;
	}
	<span class="s0">public void </span>increasePoolMoney(<span class="s0">int </span>poolMoney) {
		<span class="s0">this</span>.poolMoney += poolMoney;
	}
	<span class="s0">public void </span>decreasePoolMoney(<span class="s0">int </span>poolMoney) {
		<span class="s0">this</span>.poolMoney -= poolMoney;
	}

	<span class="s2">/**</span>
	  * 
	  * <span class="s3">@param </span><span class="s2">player : current player</span>
	  * <span class="s3">@param </span><span class="s2">amount : whether the player has more money than this value.</span>
	  * <span class="s3">@requires </span><span class="s2">player != null &amp; amount &gt;= 0</span>
	  * <span class="s3">@effects </span><span class="s2">checks whether the player has more money than &quot;amount&quot; </span>
	  */
	<span class="s0">public boolean </span>hasEnoughMoney(Player player, <span class="s0">int </span>amount) {
		<span class="s0">if</span>(player.getMoney()&gt;=amount) {
			<span class="s0">return true</span>;
		} <span class="s0">else </span>{
			<span class="s0">return false</span>;
		}
	}

	<span class="s0">public boolean </span>repOk() {
		<span class="s0">if</span>(poolMoney&gt;=<span class="s4">0</span>) 
			<span class="s0">return true</span>;
		<span class="s0">return false</span>;
	
	}

}</pre>
</body>
</html>